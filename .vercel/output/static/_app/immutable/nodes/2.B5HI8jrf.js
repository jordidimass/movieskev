import{a as u,f as v}from"../chunks/ChMrp1aO.js";import"../chunks/D0JbidwQ.js";import{o as ua}from"../chunks/DhFT2hg6.js";import{p as va,m as f,l as L,e as ga,s as t,f as M,a as da,g as a,c as p,b as o,r as l,u as T,t as ma,d as fa}from"../chunks/CPs0bkOS.js";import{e as _a}from"../chunks/Bs4F31s4.js";import{p as ha,i as A}from"../chunks/DU8b3Rg3.js";import{I as J,B as xa,S as ba,b as I,t as ya,e as wa,c as $a,d as Z,s as X,i as Sa}from"../chunks/CZKwM6Wb.js";import{i as Pa}from"../chunks/xL0ZftjY.js";function za({url:_}){return{initialQuery:_.searchParams.get("find")||"",initialLanguage:_.searchParams.get("language")||"en-US",initialRegion:_.searchParams.get("region")||"",initialYear:_.searchParams.get("year")||"",initialSortRating:_.searchParams.get("sortRating")==="asc"?"asc":"desc"}}const Ka=Object.freeze(Object.defineProperty({__proto__:null,load:za},Symbol.toStringTag,{value:"Module"}));var Ra=v("<option>English (US)</option> <option>Espanol (ES)</option> <option>Espanol (MX)</option> <option>Francais</option>",1),ka=v("<option>Worldwide</option> <option>United States</option> <option>Spain</option> <option>Mexico</option> <option>United Kingdom</option>",1),Ea=v("<option>Highest first</option> <option>Lowest first</option>",1),Ua=v('<div class="mt-4 w-full rounded-2xl border border-white/10 bg-white/[0.03] p-4"><div class="flex gap-4 overflow-x-auto pb-1"><label class="min-w-[180px] space-y-1 text-sm"><span class="text-xs uppercase tracking-[0.2em] text-zinc-400">Language</span> <!></label> <label class="min-w-[180px] space-y-1 text-sm"><span class="text-xs uppercase tracking-[0.2em] text-zinc-400">Region</span> <!></label> <label class="min-w-[180px] space-y-1 text-sm"><span class="text-xs uppercase tracking-[0.2em] text-zinc-400">Year</span> <!></label> <label class="min-w-[220px] space-y-1 text-sm"><span class="text-xs uppercase tracking-[0.2em] text-zinc-400">Sort by rating</span> <!></label></div></div>'),La=v('<div class="glass p-10 text-center text-zinc-300">Loading movies...</div>'),Ma=v('<a class="poster-card"><img/></a>'),Ta=v('<div class="movie-grid"></div>'),ja=v('<div class="glass p-10 text-center text-zinc-400">No matches found. Try another title or cast member.</div>'),Na=v(`<div class="fixed inset-0 z-0 opacity-25 mix-blend-soft-light" style="background-image:url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Crect width='1' height='1' fill='rgba(255,255,255,0.08)'/%3E%3C/svg%3E')"></div> <nav class="shell glass sticky top-4 z-40 mt-8 flex flex-col gap-4 p-5 sm:mt-10 sm:flex-row sm:items-center sm:justify-between"><a class="text-3xl font-semibold tracking-[0.14em]" href="/">MOVIES<span class="text-pink-600">KEV</span></a> <form class="relative w-full flex-1"><div class="flex w-full gap-2 sm:gap-3"><!> <!></div> <!></form></nav> <main class="shell relative z-10 pb-14"><!></main>`,1);function Qa(_,Y){va(Y,!1);let P=ha(Y,"data",8),z=f(P().initialQuery),b=f(P().initialLanguage),g=f(P().initialRegion),d=f(P().initialYear),y=f(P().initialSortRating),R=f(!0),k=f([]),E=f(!1),F,K=!1;async function aa(){o(R,!0);const e=new URLSearchParams({language:a(b),sortRating:a(y)});a(g)&&e.set("region",a(g)),a(d)&&e.set("year",a(d));const h=await(await fetch(`/api/popular?${e.toString()}`)).json();o(k,h.results||[]),o(R,!1)}async function j(){const e=a(z).trim();if(!e){await aa();return}o(R,!0);const s=new URLSearchParams({find:e,language:a(b),sortRating:a(y)});a(g)&&s.set("region",a(g)),a(d)&&s.set("year",a(d));const r=await(await fetch(`/api/search?${s.toString()}`)).json();o(k,r.results||[]),o(R,!1)}function U(){K&&(clearTimeout(F),F=setTimeout(()=>{j()},220))}function ea(e){e.preventDefault(),j(),o(E,!1)}ua(async()=>{K=!0,await j()}),L(()=>a(z),()=>{a(z),U()}),L(()=>a(b),()=>{a(b),U()}),L(()=>a(g),()=>{a(g),U()}),L(()=>a(d),()=>{a(d),U()}),L(()=>a(y),()=>{a(y),U()}),ga(),Pa();var Q=Na(),N=t(M(Q),2),B=t(p(N),2),O=p(B),V=p(O);J(V,{name:"find",placeholder:"Search movies or talent",autocomplete:"off",className:"h-11",get value(){return a(z)},set value(e){o(z,e)},$$legacy:!0});var ta=t(V,2);xa(ta,{type:"button",variant:"ghost",className:"h-11 w-11 rounded-full border-0 bg-white/5 p-0 hover:bg-white/15","aria-label":"Toggle filters",$$events:{click:()=>o(E,!a(E))},children:(e,s)=>{ba(e,{size:18,get active(){return a(E)},className:"opacity-95"})},$$slots:{default:!0}}),l(O);var sa=t(O,2);{var ra=e=>{var s=Ua(),h=p(s),r=p(h),w=t(p(r),2);I(w,{get value(){return a(b)},set value(i){o(b,i)},children:(i,H)=>{var m=Ra(),n=M(m);n.value=n.__value="en-US";var c=t(n,2);c.value=c.__value="es-ES";var x=t(c,2);x.value=x.__value="es-MX";var S=t(x,2);S.value=S.__value="fr-FR",u(i,m)},$$slots:{default:!0},$$legacy:!0}),l(r);var $=t(r,2),q=t(p($),2);I(q,{get value(){return a(g)},set value(i){o(g,i)},children:(i,H)=>{var m=ka(),n=M(m);n.value=n.__value="";var c=t(n,2);c.value=c.__value="US";var x=t(c,2);x.value=x.__value="ES";var S=t(x,2);S.value=S.__value="MX";var W=t(S,2);W.value=W.__value="GB",u(i,m)},$$slots:{default:!0},$$legacy:!0}),l($);var C=t($,2),pa=t(p(C),2);J(pa,{type:"number",min:"1900",max:"2099",placeholder:"e.g. 2024",className:"rounded-xl",get value(){return a(d)},set value(i){o(d,i)},$$legacy:!0}),l(C);var G=t(C,2),ca=t(p(G),2);I(ca,{get value(){return a(y)},set value(i){o(y,i)},children:(i,H)=>{var m=Ea(),n=M(m);n.value=n.__value="desc";var c=t(n,2);c.value=c.__value="asc",u(i,m)},$$slots:{default:!0},$$legacy:!0}),l(G),l(h),l(s),ya(3,s,()=>$a,()=>({duration:220})),u(e,s)};A(sa,e=>{a(E)&&e(ra)})}l(B),l(N);var D=t(N,2),ia=p(D);{var oa=e=>{var s=La();u(e,s)},la=e=>{var s=Ta();wa(s,5,()=>a(k),Sa,(h,r)=>{var w=Ma(),$=p(w);l(w),ma(q=>{X(w,"href",q),X($,"src",(a(r),T(()=>a(r).poster_path?`https://image.tmdb.org/t/p/w400${a(r).poster_path}`:"/img/guest.jpg"))),X($,"alt",(a(r),T(()=>`Poster for ${a(r).title||a(r).original_title}`)))},[()=>(fa(Z),a(r),T(()=>`/title/${Z(a(r).title||a(r).original_title)}?id=${a(r).id}`))]),u(h,w)}),l(s),u(e,s)},na=e=>{var s=ja();u(e,s)};A(ia,e=>{a(R)?e(oa):(a(k),T(()=>a(k).length)?e(la,1):e(na,!1))})}l(D),_a("submit",B,ea),u(_,Q),da()}export{Qa as component,Ka as universal};
